# rk3566-v4l2-base

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-RK3566-orange.svg)]()
[![延迟](https://img.shields.io/badge/延迟-78ms💨-green.svg)]()
[![状态](https://img.shields.io/badge/状态-开发中🚧-yellow.svg)]()

## 📖 项目简介

一句话说清楚这是什么：
"基于RK3566的零拷贝V4L2视频处理框架，目标是最低延迟的实时视频流水线"

## ✨ 特性亮点

## 🚀 核心优势
✅ 极低延迟：V4L2采集到DRM显示目前为78ms（640×480）
    ps：目前仍然有降低延迟的空间，极限应该是30ms左右
✅ 零拷贝架构：共享内存多进程设计，实现模块解耦       
    ps：目前没有实现零拷贝，但是快了，下个版本就行了（估计）
✅ 模块化设计：采集、处理、显示分离，易于扩展
✅ 稳定可靠：避免单点故障导致系统崩溃
    ps：我会加入一些功能安全的思想，但是现在我想先侧重把功能跑通
### 📊 性能数据（当前版本）
| 指标 | 数值 | 备注 |
|------|------|------|
| 分辨率 | 640×480 | 支持动态调整 |
| **端到端延迟** | **78ms** | 详细测试报告见下 |

### 硬件要求
- 泰山派+6寸液晶屏+OV5695摄像头+12V电源

# Buildroot
# 需要启用DRM和V4L2支持

## 🚀 文件架构
rk3566-v4l2-base/
├── 01-v4l2/                 # V4L2摄像头采集模块
│   ├── inc/                # 头文件
│   ├── src/                # 源代码
│   ├── v4l2_app           # 采集应用程序
│   └── Makefile
├── 02-shm/                 # 共享内存传输模块
│   ├── inc/
│   ├── src/
│   ├── shm_app            # 共享内存服务
│   ├── build/
│   └── Makefile
├── 03-drm/                 # DRM显示模块
│   ├── inc/
│   ├── src/
│   ├── drm_app            # 显示应用程序
│   ├── build/
│   └── Makefile
├── 测试报告/               # 性能测试报告
│   └── 测试报告.xlsx      # 详细测试数据
├── Build.sh               # 一键构建脚本
├── Makefile               # 主构建文件（还没做）
└── README.md              # 本文件

🎯 愿景
成为RK3566平台上优秀的多媒体处理框架，为智能摄像头、视频会议、工业视觉和嵌入式流媒体等应用提供高性能、低延迟、高可靠性的解决方案。

1.延迟目标（理论极限）：
┌───────────────┬─────────────────┬─────────────────┐
│   分辨率      │   当前延迟      │   终极目标      │
├───────────────┼─────────────────┼─────────────────┤
│ 640×480       │ 78ms           │ <15ms          │
│ 1280×720      │ 待测           │ <25ms          │
│ 1920×1080     │ 待测           │ <35ms          │
└───────────────┴─────────────────┴─────────────────┘
性能指标：
• 零拷贝全链路：DMA→用户空间→编码→显示（无CPU拷贝）
• 硬件加速全覆盖：ISP、RGA、NPU、VPU全利用
• 确定性延迟：抖动<±2ms，满足工业实时性要求

2. 完整功能：一站式多媒体解决方案
┌─────────────────┬─────────────────────────────┐
│   模块          │   目标功能                  │
├─────────────────┼─────────────────────────────┤
│ 视频采集        │ V4L2/MIPI/HDMI-IN，多路复用  │
│ 视频处理        │ 去噪/稳像/HDR/电子防抖       │
│ 视频编码        │ H.264/H.265/AV1硬件编码      │
│ 音频处理        │ 多麦克风阵列，AEC/ANS        │
│ 网络传输        │ RTMP/RTSP/WebRTC/SRT全支持   │
│ 存储管理        │ 循环录制，断点续录，加密存储  │
│ 系统管理        │ Web/Qt界面，OTA，远程调试    │
└─────────────────┴─────────────────────────────┘

